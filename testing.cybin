dofile('./examples/cybin.cybin')
os.execute('jack_connect cybin:audio-out_1 system:playback_1 && jack_connect cybin:audio-out_2 system:playback_2')
s=Sampler{sample='./examples/GLITCH.AIF'}
m=Metro()
t=Sin{}
r=Reverb2{}
c=Compressor{attack=0.001,release=2,threshold=-35,ratio=5}
cc=Compressor{attack=0.002,release=0.05,threshold=-20,ratio=2.5}

s{pitch=1}

function play()
  t{freq=math.pow(math.random(),3)+0.01};
  t{grainDuration=math.pow(math.random(),3)*4}
  return 1/8
end
m('play')
function __process()
  m()
  s{offset=t()*0.4+0.5,speed=0}
  local out = s()
  local verb = r(out)
  out = out+c(verb,out)
  out = cc(out)
  return out,out
end
